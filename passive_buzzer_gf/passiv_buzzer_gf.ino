int buzzer_pin = 6;

// 할아버지의 낡은 시계 음계
int melody[] = 
    // 523,587,659,698,784,880,988,1046
    {392,
    523,494,523,587,523,587,
    659,698,659,440,587,587,
    523,523,523,494,440,494,
    523,392,523,494,523,587,523,587,
    659,698,659,440,587,587,
    523,523,523,494,440,494,
    523,523,659,784,659,587,523,494,523,
    587,523,494,440,392,523,659,
    784,659,587,523,494,523,
    587,392,392,523,587, // 64번째,65번째 다음 4분쉼표
    659,659,659,698,659,440,587,587,
    523,494,
    523, // 76번째 다음 4분쉼표
    392,392,
    523,392,392,440,392,392,
    330,392,330,392,392,
    523,392,392,440,392,392,
    330,392,330,392,392,
    523,587, // 101번째,102번째 다음 4.5분쉼표
    659,659,659,698,659,440,587,587,
    523,494,
    523};

int melody_duration[] = 
    {4,
    4,8,8,4,8,8,
    4,8,8,4,8,8,
    4,8,8,4,8,8,
    3,4,4,8,8,4,8,8,
    4,8,8,4,8,8,
    4,8,8,4,8,8,
    3,8,8,4,8,8,4,8,8,
    8,8,8,8,4,8,8,
    4,8,8,4,8,8,
    3,8,8,4,4,
    8,8,8,8,8,4,8,8,
    2,2,
    3,
    8,8,
    4,8,8,6,6,4,
    8,8,8,8,8, //85,86,87 일때 반박자 더 쉬기
    4,8,8,6,6,4,
    8,8,8,8,8, // 96,97,98 일때 반박자 더 쉬기
    8,8,
    8,8,8,8,8,4,8,8,
    2,2,
    3}; 

void setup(){
    pinMode(buzzer_pin,OUTPUT);
}

int between;

void loop(){
    for(int i=0;i<sizeof(melody)/sizeof(int);i++){
        int duration = 1000 / melody_duration[i];
        tone(buzzer_pin,melody[i],duration);
        if(i==64 || i==65 || i==76){
            between = 300 + duration * 1.25;;
        }
        else if (i==101 || i==102){
            between = 450 + duration * 1.25;
        }
        else if(i==85 || i==86 || i==87 || i==96 || i==97 || i==98){
            between = 150 + duration * 1.25;
        }
        else{
            between = duration * 1.25;
        }
        
        delay(between);
        noTone(buzzer_pin);
    }
}